<!-- feed.html -->
{% extends 'base.html' %}

{% block content %}
    <h2>News Feed</h2>
    <nav class="navigation">
        <ul>
            <li>
                {% if user.is_authenticated %}
                    <a href="{% url 'social:logout' %}">Logout</a>
                {% else %}
                    <a href="{% url 'social:login' %}">Login</a>
                {% endif %}
            </li>
            <li><a href="{% url 'social:profile' user_id=request.user.id %}">My Profile</a></li>
            <li><a href="{% url 'social:create_post' %}">Create Post</a></li>
            <li><a href="{% url 'social:user_search' %}">User Search</a></li>
            <!-- Add more navigation links as needed -->
        </ul>
    </nav>
    {% for post in posts %}
        <div class="post">
            <h3>{{ post.user.email }}</h3>
            <p>{{ post.content }}</p>
            <!-- Display post details such as date, likes, comments, etc. -->

            <div class="post-actions">
                <!-- Like post -->
                <form method="post" action="{% url 'social:like_post' post.id %}">
                    {% csrf_token %}
                    <button type="submit">Like</button>
                </form>

                <!-- Comment on post -->
                <form method="post" action="{% url 'social:comment_post' post.id %}">
                    {% csrf_token %}
                    <input type="text" name="comment" placeholder="Add a comment...">
                    <button type="submit">Comment</button>
                </form>

                <!-- Share post -->
                <form method="post" action="{% url 'social:share_post' post.id %}">
                    {% csrf_token %}
                    <button type="submit">Share</button>
                </form>

                {% if post.user == request.user %}
                    <!-- Edit post -->
                    <form method="get" action="{% url 'social:edit_post' post.id %}">
                        <button type="submit">Edit</button>
                    </form>

                    <!-- Delete post -->
                    <form method="post" action="{% url 'social:delete_post' post.id %}">
                        {% csrf_token %}
                        <button type="submit">Delete</button>
                    </form>
                {% endif %}
            </div>
        </div>
    {% empty %}
        <p>No posts found.</p>
    {% endfor %}
{% endblock %}
